<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>T√¨m Bundle ID App Store</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #f2f2f7;
  margin: 0; padding: 20px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  flex-direction: column;
}
.container {
  width: 100%;
  max-width: 420px;
  background: #fff;
  padding: 24px 20px 30px;
  border-radius: 16px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  text-align: center;
  align-self: center;
}
h2 {
  margin: 0 0 15px;
  font-size: 22px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
h2 img {
  width: 22px; height: 22px;
}
input, select, button {
  width: 100%;
  padding: 12px 14px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  outline: none;
  box-sizing: border-box;
  margin-top: 10px;
  text-align: center;
}
select { background: #f8f8f8; text-align-last: center; }
button {
  background: #007aff;
  color: white;
  border: none;
  cursor: pointer;
  font-weight: 500;
  transition: 0.2s;
}
button:hover { background: #005ecb; }
.note {
  display: none;
  font-size: 13px;
  color: #666;
  margin-top: 10px;
  line-height: 1.5;
}
.app {
  display: flex;
  align-items: flex-start;
  border-bottom: 1px solid #eee;
  padding: 12px 0;
}
.app a img {
  width: 60px; height: 60px;
  border-radius: 12px;
  margin-right: 12px;
  transition: 0.2s;
  object-fit: cover;
  background: #f3f3f3;
}
.app a img:hover { transform: scale(1.05); }
.app-info { text-align: left; flex: 1; }
.bundle {
  background: #f1f1f1;
  padding: 4px 8px;
  border-radius: 8px;
  font-family: monospace;
  cursor: pointer;
  user-select: all;
  display: inline-block;
  color: #007aff;
}
.bundle.disabled {
  cursor: default;
  opacity: 0.6;
  user-select: text;
  color: #666;
}
.bundle:hover { background: #e5e5e5; }
#results { margin-top: 20px; text-align: left; }

.footer {
  text-align: center;
  margin-top: 25px;
  font-size: 14px;
}
.footer a {
  text-decoration: none;
  color: #007aff;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: color 0.3s ease;
}
.footer a:hover { color: #005ecb; }
.arrow {
  display: inline-block;
  transition: transform 0.4s ease, opacity 0.4s ease;
}
.footer a:active { transform: scale(0.97); }

/* Site credit at page bottom */
.site-credit {
  text-align: center;
  color: #888;
  font-size: 13px;
  margin-top: 12px;
  align-self: center;
}

/* Small screens tweak */
@media (max-width: 420px) {
  .container { padding: 18px 14px 22px; border-radius: 12px; }
  h2 { font-size: 20px; }
}
</style>
</head>
<body>
  <div class="container">
    <h2><img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple"> T√¨m Bundle ID App Store</h2>
    <input type="text" id="appName" placeholder="Nh·∫≠p t√™n ·ª©ng d·ª•ng (VD: Facebook, Zalo...)">
    <select id="country">
      <option value="VN" selected>üáªüá≥ Vi·ªát Nam</option>
      <option value="US">üá∫üá∏ Hoa K·ª≥</option>
      <option value="JP">üáØüáµ Nh·∫≠t B·∫£n</option>
      <option value="KR">üá∞üá∑ H√†n Qu·ªëc</option>
      <option value="SG">üá∏üá¨ Singapore</option>
      <option value="CN">üá®üá≥ Trung Qu·ªëc</option>
      <option value="RU">üá∑üá∫ Nga</option>
    </select>
    <button id="searchBtn">T√¨m ki·∫øm</button>
    <div class="note" id="copyNote">
      üí° ·∫§n v√†o <b>Icon</b> ƒë·ªÉ m·ªü App Store<br>
      üí° ·∫§n v√†o <b>Bundle ID</b> ƒë·ªÉ sao ch√©p
    </div>
    <div id="results"></div>

    <div class="footer">
      <a href="https://nhut990.github.io/Bundle/icon/" id="getAppIcon" style="margin-bottom:10px;display:inline-block;">
        üñºÔ∏è L·∫•y icon App Store
      </a>
      <a href="#" id="homeLink">
        <span class="arrow" id="arrow">‚¨ÖÔ∏è</span> Quay v·ªÅ trang ch·ªß
      </a>
    </div>
  </div>

  <div class="site-credit">Created by Minh Nhut</div>

<script>
(function () {
  var searchBtn = document.getElementById('searchBtn');
  var appNameInput = document.getElementById('appName');
  var countrySelect = document.getElementById('country');
  var resultsDiv = document.getElementById('results');
  var copyNote = document.getElementById('copyNote');
  var homeLink = document.getElementById('homeLink');
  var arrow = document.getElementById('arrow');

  var placeholderSvg = encodeURIComponent(
    '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">' +
    '<rect fill="%23eee" width="100" height="100"/>' +
    '<text x="50" y="55" font-size="12" text-anchor="middle" fill="%23999">No Image</text>' +
    '</svg>'
  );
  var placeholderUrl = 'data:image/svg+xml;charset=UTF-8,' + placeholderSvg;

  searchBtn.onclick = searchApp;
  appNameInput.onkeydown = function (e) {
    e = e || window.event;
    if (e.keyCode === 13) searchApp();
  };

  homeLink.onclick = function (e) {
    e.preventDefault();
    if (arrow) {
      arrow.style.transform = "translateX(-50px)";
      arrow.style.opacity = "0";
    }
    setTimeout(function () { window.location.href = "https://nhut990.github.io"; }, 400);
  };

  function searchApp() {
    var name = (appNameInput.value || '').trim();
    var country = countrySelect.value;
    resultsDiv.innerHTML = 'üîç ƒêang t√¨m...';
    copyNote.style.display = 'none';
    if (!name) {
      resultsDiv.innerHTML = '‚ö†Ô∏è Vui l√≤ng nh·∫≠p t√™n ·ª©ng d·ª•ng.';
      return;
    }

    // X·ª≠ l√Ω lo·∫°i b·ªè d·∫•u ti·∫øng Vi·ªát cho iOS c≈©
    var term = removeDiacritics(name).toLowerCase();

    var url = 'https://itunes.apple.com/search?term=' + encodeURIComponent(term) +
              '&country=' + encodeURIComponent(country) + '&entity=software&limit=10';

    getJSON(url, function (err, data) {
      if (err || !data || !data.results || !data.results.length) {
        resultsDiv.innerHTML = '‚ùå Kh√¥ng t√¨m th·∫•y ·ª©ng d·ª•ng n√†o trong khu v·ª±c n√†y.';
      } else {
        renderResults(data.results);
      }
    });
  }

  // XMLHttpRequest ƒë∆°n gi·∫£n cho ES5
  function getJSON(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4) {
        if (xhr.status >= 200 && xhr.status < 300) {
          try {
            var data = JSON.parse(xhr.responseText);
            callback(null, data);
          } catch (e) {
            callback(e, null);
          }
        } else {
          callback(new Error('K·∫øt n·ªëi l·ªói'), null);
        }
      }
    };
    xhr.onerror = function () { callback(new Error('K·∫øt n·ªëi l·ªói'), null); };
    xhr.send();
  }

  function renderResults(apps) {
    resultsDiv.innerHTML = '';
    copyNote.style.display = 'block';

    for (var i = 0; i < apps.length; i++) {
      var app = apps[i];
      var appEl = document.createElement('div');
      appEl.className = 'app';

      var link = document.createElement('a');
      link.href = app.trackViewUrl || '#';
      link.target = '_blank';
      link.rel = 'noopener noreferrer';
      link.title = 'M·ªü trong App Store';

      var img = document.createElement('img');
      img.src = app.artworkUrl100 || placeholderUrl;
      img.alt = app.trackName || 'App';
      img.onerror = function () { this.src = placeholderUrl; };

      link.appendChild(img);
      appEl.appendChild(link);

      var info = document.createElement('div');
      info.className = 'app-info';

      var title = document.createElement('div');
      var b = document.createElement('b');
      b.style.color = '#007aff';
      b.textContent = app.trackName || 'Kh√¥ng r√µ';
      title.appendChild(b);

      var versionSpan = document.createElement('span');
      versionSpan.style.color = '#555';
      versionSpan.style.marginLeft = '6px';
      versionSpan.textContent = '(v' + (app.version || app.versionString || 'N/A') + ')';
      title.appendChild(versionSpan);
      info.appendChild(title);

      var bundleLine = document.createElement('div');
      var bundleSpan = document.createElement('span');
      bundleSpan.className = 'bundle';
      if (app.bundleId) {
        bundleSpan.textContent = app.bundleId;
        bundleSpan.onclick = function () { copyBundle(this.textContent); };
      } else {
        bundleSpan.textContent = 'Kh√¥ng r√µ';
        bundleSpan.className += ' disabled';
      }
      bundleLine.appendChild(bundleSpan);
      info.appendChild(bundleLine);

      var seller = document.createElement('div');
      seller.innerHTML = '<small>' + escapeHtml(app.sellerName || 'Kh√¥ng r√µ') + '</small>';
      info.appendChild(seller);

      var iosReq = document.createElement('div');
      iosReq.innerHTML = '<small>Y√™u c·∫ßu: ' + escapeHtml(app.minimumOsVersion || 'Kh√¥ng r√µ') + ' tr·ªü l√™n</small>';
      info.appendChild(iosReq);

      var updated = document.createElement('div');
      var dateText = app.currentVersionReleaseDate ? formatDate(app.currentVersionReleaseDate) : 'Kh√¥ng r√µ';
      updated.innerHTML = '<small>C·∫≠p nh·∫≠t: ' + escapeHtml(dateText) + '</small>';
      info.appendChild(updated);

      var price = document.createElement('div');
      price.innerHTML = '<small>' + escapeHtml(app.formattedPrice || (app.price === 0 || app.price === '0' ? 'Free' : (app.price + ' ' + (app.currency || ''))) ) + '</small>';
      info.appendChild(price);

      if (app.fileSizeBytes) {
        var sizeMB = (parseInt(app.fileSizeBytes, 10) / (1024 * 1024)).toFixed(1);
        var size = document.createElement('div');
        size.innerHTML = '<small>K√≠ch c·ª°: ' + sizeMB + ' MB</small>';
        info.appendChild(size);
      }

      appEl.appendChild(info);
      resultsDiv.appendChild(appEl);
    }
  }

  function copyBundle(bundle) {
    if (!bundle) return;
    // iOS c≈© kh√¥ng c√≥ Clipboard API, d√πng execCommand truy·ªÅn th·ªëng
    var input = document.createElement('textarea');
    input.value = bundle;
    input.style.position = 'fixed';
    input.style.left = '-9999px';
    document.body.appendChild(input);
    input.select();
    try {
      document.execCommand('copy');
      showCopied(bundle);
    } catch (e) {
      showCopied('L·ªói khi sao ch√©p');
    }
    document.body.removeChild(input);
  }

  function showCopied(text) {
    var temp = document.createElement('div');
    temp.textContent = '‚úÖ ƒê√£ sao ch√©p: ' + text;
    temp.style.position = 'fixed';
    temp.style.bottom = '20px';
    temp.style.left = '50%';
    temp.style.transform = 'translateX(-50%)';
    temp.style.background = 'rgba(0,0,0,0.8)';
    temp.style.color = 'white';
    temp.style.padding = '8px 14px';
    temp.style.borderRadius = '10px';
    temp.style.fontSize = '14px';
    temp.style.zIndex = '9999';
    document.body.appendChild(temp);
    setTimeout(function () { temp.parentNode.removeChild(temp); }, 1500);
  }

  // Chuy·ªÉn ng√†y v·ªÅ ƒë·ªãnh d·∫°ng Vi·ªát Nam cho m√°y c≈© (kh√¥ng d√πng toLocaleDateString)
  function formatDate(str) {
    var d = new Date(str);
    if (isNaN(d)) return 'Kh√¥ng r√µ';
    var day = d.getDate();
    var month = d.getMonth() + 1;
    var year = d.getFullYear();
    return day + '/' + month + '/' + year;
  }

  // X√≥a d·∫•u ti·∫øng Vi·ªát cho iOS 10
  function removeDiacritics(str) {
    var map = {
      '√†√°·∫°·∫£√£√¢·∫ß·∫•·∫≠·∫©·∫´ƒÉ·∫±·∫Ø·∫∑·∫≥·∫µ': 'a', '√®√©·∫π·∫ª·∫Ω√™·ªÅ·∫ø·ªá·ªÉ·ªÖ': 'e',
      '√¨√≠·ªã·ªâƒ©': 'i', '√≤√≥·ªç·ªè√µ√¥·ªì·ªë·ªô·ªï·ªó∆°·ªù·ªõ·ª£·ªü·ª°': 'o',
      '√π√∫·ª•·ªß≈©∆∞·ª´·ª©·ª±·ª≠·ªØ': 'u', '·ª≥√Ω·ªµ·ª∑·ªπ': 'y', 'ƒë': 'd',
      '√Ä√Å·∫†·∫¢√É√Ç·∫¶·∫§·∫¨·∫®·∫™ƒÇ·∫∞·∫Æ·∫∂·∫≤·∫¥': 'A', '√à√â·∫∏·∫∫·∫º√ä·ªÄ·∫æ·ªÜ·ªÇ·ªÑ': 'E',
      '√å√ç·ªä·ªàƒ®': 'I', '√í√ì·ªå·ªé√ï√î·ªí·ªê·ªò·ªî·ªñ∆†·ªú·ªö·ª¢·ªû·ª†': 'O',
      '√ô√ö·ª§·ª¶≈®∆Ø·ª™·ª®·ª∞·ª¨·ªÆ': 'U', '·ª≤√ù·ª¥·ª∂·ª∏': 'Y', 'ƒê': 'D'
    };
    for (var regex in map) {
      str = str.replace(new RegExp('[' + regex + ']', 'g'), map[regex]);
    }
    return str;
  }

  function escapeHtml(str) {
    if (!str) return '';
    return String(str).replace(/[&<>"'`=\/]/g, function (s) {
      return ({
        '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;',
        '/': '&#x2F;', '`': '&#x60;', '=': '&#x3D;'
      })[s];
    });
  }
})();
</script>
</body>
</html>