<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tìm Bundle ID App Store</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: #f2f2f7;
  margin: 0; padding: 20px;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
}
.container {
  width: 100%;
  max-width: 420px;
  background: #fff;
  padding: 24px 20px 30px;
  border-radius: 16px;
  box-shadow: 0 3px 10px rgba(0,0,0,0.1);
  text-align: center;
}
h2 {
  margin: 0 0 15px;
  font-size: 22px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}
h2 img {
  width: 22px; height: 22px;
}
input, select, button {
  width: 100%;
  padding: 12px 14px;
  font-size: 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  outline: none;
  box-sizing: border-box;
  margin-top: 10px;
  text-align: center;
}
select { background: #f8f8f8; text-align-last: center; }
button {
  background: #007aff;
  color: white;
  border: none;
  cursor: pointer;
  font-weight: 500;
  transition: 0.2s;
}
button:hover { background: #005ecb; }
.note {
  display: none;
  font-size: 13px;
  color: #666;
  margin-top: 10px;
  line-height: 1.5;
}
.app {
  display: flex;
  align-items: flex-start;
  border-bottom: 1px solid #eee;
  padding: 12px 0;
}
.app a img {
  width: 60px; height: 60px;
  border-radius: 12px;
  margin-right: 12px;
  transition: 0.2s;
}
.app a img:hover { transform: scale(1.05); }
.app-info { text-align: left; flex: 1; }
.bundle {
  background: #f1f1f1;
  padding: 4px 8px;
  border-radius: 8px;
  font-family: monospace;
  cursor: pointer;
  user-select: all;
  display: inline-block;
  color: #007aff;
}
.bundle:hover { background: #e5e5e5; }
#results { margin-top: 20px; text-align: left; }

.footer {
  text-align: center;
  margin-top: 25px;
  font-size: 14px;
}
.footer a {
  text-decoration: none;
  color: #007aff;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: color 0.3s ease;
}
.footer a:hover { color: #005ecb; }
.arrow {
  display: inline-block;
  transition: transform 0.4s ease, opacity 0.4s ease;
}
.footer a:active { transform: scale(0.97); }
</style>
</head>
<body>
  <div class="container">
    <h2><img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple"> Tìm Bundle ID App Store</h2>
    <input type="text" id="appName" placeholder="Nhập tên ứng dụng (VD: Facebook, Zalo...)">
    <select id="country">
      <option value="VN" selected>🇻🇳 Việt Nam</option>
      <option value="US">🇺🇸 Hoa Kỳ</option>
      <option value="JP">🇯🇵 Nhật Bản</option>
      <option value="KR">🇰🇷 Hàn Quốc</option>
      <option value="SG">🇸🇬 Singapore</option>
      <option value="CN">🇨🇳 Trung Quốc</option>
      <option value="RU">🇷🇺 Nga</option>
    </select>
    <button onclick="searchApp()">Tìm kiếm</button>
    <div class="note" id="copyNote">
      💡 Ấn vào <b>Icon</b> để mở App Store<br>
      💡 Ấn vào <b>Bundle ID</b> để sao chép
    </div>
    <div id="results"></div>

    <div class="footer">
      <a href="#" id="homeLink" onclick="goHome(event)">
        <span class="arrow" id="arrow">⬅️</span> Quay về trang chủ
      </a>
    </div>
  </div>

<script>
async function searchApp() {
  const name = document.getElementById('appName').value.trim();
  const country = document.getElementById('country').value;
  const resultsDiv = document.getElementById('results');
  const copyNote = document.getElementById('copyNote');
  resultsDiv.innerHTML = "🔍 Đang tìm...";
  copyNote.style.display = "none";

  if (!name) {
    resultsDiv.innerHTML = "⚠️ Vui lòng nhập tên ứng dụng.";
    return;
  }

  const url = `https://itunes.apple.com/search?term=${encodeURIComponent(name)}&country=${country}&entity=software&limit=10`;
  try {
    const res = await fetch(url);
    const data = await res.json();

    if (!data.results || data.results.length === 0) {
      resultsDiv.innerHTML = "❌ Không tìm thấy ứng dụng nào trong khu vực này.";
      return;
    }

    copyNote.style.display = "block";
    resultsDiv.innerHTML = data.results.map(app => `
      <div class="app">
        <a href="${app.trackViewUrl}" target="_blank" title="Mở trong App Store">
          <img src="${app.artworkUrl100}" alt="${app.trackName}">
        </a>
        <div class="app-info">
          <b style="color:#007aff">${app.trackName}</b> 
          <span style="color:#555">(v${app.version || 'N/A'})</span><br>
          <span class="bundle" onclick="copyBundle('${app.bundleId}')">${app.bundleId}</span><br>
          <small>${app.sellerName || 'Không rõ'}</small><br>
          <small>Yêu cầu: iOS ${app.minimumOsVersion || 'Không rõ'} trở lên</small><br>
          <small>Cập nhật: ${app.currentVersionReleaseDate ? new Date(app.currentVersionReleaseDate).toLocaleDateString('vi-VN') : 'Không rõ'}</small><br>
          <small>${app.formattedPrice || 'Free'}</small>
        </div>
      </div>
    `).join('');

  } catch (e) {
    resultsDiv.innerHTML = "⚠️ Lỗi khi truy vấn API.";
    console.error(e);
  }
}

function copyBundle(bundle) {
  navigator.clipboard.writeText(bundle);
  const temp = document.createElement('div');
  temp.textContent = "✅ Đã sao chép: " + bundle;
  temp.style.position = "fixed";
  temp.style.bottom = "20px";
  temp.style.left = "50%";
  temp.style.transform = "translateX(-50%)";
  temp.style.background = "rgba(0,0,0,0.8)";
  temp.style.color = "white";
  temp.style.padding = "8px 14px";
  temp.style.borderRadius = "10px";
  temp.style.fontSize = "14px";
  temp.style.zIndex = "9999";
  document.body.appendChild(temp);
  setTimeout(() => temp.remove(), 1500);
}

function goHome(event) {
  event.preventDefault();
  const arrow = document.getElementById('arrow');
  arrow.style.transform = "translateX(-50px)";
  arrow.style.opacity = "0";
  setTimeout(() => {
    window.location.href = "https://nhut990.github.io";
  }, 400);
}
</script>
</body>
</html>
