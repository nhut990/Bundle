<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>L·∫•y icon ·ª©ng d·ª•ng App Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    h2 {
      color: #333;
    }
    input[type="text"] {
      width: 80%;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #result {
      margin-top: 20px;
    }
    img {
      max-width: 150px;
      margin-top: 10px;
    }
    a {
      display: inline-block;
      margin-top: 10px;
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h2>Nh·∫≠p link ·ª©ng d·ª•ng tr√™n App Store</h2>
  <input type="text" id="appLink" placeholder="https://apps.apple.com/vn/app/bodaplay-ai/id1641474610?l=vi">
  <button onclick="getAppIcon()">L·∫•y icon</button>
  <div id="result"></div>

  <script>
    function getAppIcon() {
      const link = document.getElementById("appLink").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      // Ki·ªÉm tra ƒë·ªãnh d·∫°ng link v√† tr√≠ch xu·∫•t ID
      const match = link.match(/id(\d+)/);
      if (!link.includes("apps.apple.com") || !match) {
        resultDiv.innerHTML = "<p style='color:red;'>‚ùå Link kh√¥ng h·ª£p l·ªá ho·∫∑c kh√¥ng ch·ª©a ID ·ª©ng d·ª•ng.</p>";
        return;
      }

      const appId = match[1];
      const apiUrl = `https://itunes.apple.com/lookup?id=${appId}&country=VN`;

      // Hi·ªÉn th·ªã tr·∫°ng th√°i ƒëang t·∫£i
      resultDiv.innerHTML = "<p>‚è≥ ƒêang t·∫£i d·ªØ li·ªáu ·ª©ng d·ª•ng...</p>";

      fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          if (data.resultCount === 0) {
            resultDiv.innerHTML = "<p style='color:red;'>‚ùå Kh√¥ng t√¨m th·∫•y ·ª©ng d·ª•ng.</p>";
            return;
          }

          const app = data.results[0];
          const iconUrl = app.artworkUrl512;

          resultDiv.innerHTML = `
            <p><strong>${app.trackName}</strong></p>
            <img src="${iconUrl}" alt="App Icon">
            <br><a href="${iconUrl}" download>üì• T·∫£i icon</a>
          `;
        })
        .catch(error => {
          console.error("L·ªói:", error);
          resultDiv.innerHTML = "<p style='color:red;'>‚ùå ƒê√£ x·∫£y ra l·ªói khi t·∫£i d·ªØ li·ªáu.</p>";
        });
    }
  </script>
</body>
</html>
