<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>L·∫•y icon ·ª©ng d·ª•ng App Store</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
      text-align: center;
    }
    h2 {
      color: #333;
    }
    .input-group {
      margin-bottom: 15px;
    }
    input[type="text"] {
      width: 80%;
      padding: 10px;
      font-size: 16px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover {
      background-color: #0056b3;
    }
    #result {
      margin-top: 20px;
    }
    img {
      max-width: 150px;
      margin-top: 10px;
    }
    a {
      display: inline-block;
      margin-top: 10px;
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h2>Nh·∫≠p link ·ª©ng d·ª•ng tr√™n App Store</h2>
  <div class="input-group">
    <input
      type="text"
      id="appLink"
      placeholder="v√≠ d·ª• https://apps.apple.com/vn/app/youtube/id544007664?l=vi"
    />
  </div>
  <button onclick="getAppIcon()">L·∫•y icon</button>
  <div id="result"></div>

  <script>
    async function getAppIcon() {
      const link = document.getElementById("appLink").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      const match = link.match(/id(\d+)/);
      if (!link.includes("apps.apple.com") || !match) {
        resultDiv.innerHTML = "<p style='color:red;'>‚ùå Link kh√¥ng h·ª£p l·ªá ho·∫∑c kh√¥ng ch·ª©a ID ·ª©ng d·ª•ng.</p>";
        return;
      }

      const appId = match[1];
      const apiUrl = `https://itunes.apple.com/lookup?id=${appId}&country=VN`;

      resultDiv.innerHTML = "<p>‚è≥ ƒêang t·∫£i d·ªØ li·ªáu ·ª©ng d·ª•ng...</p>";

      try {
        const response = await fetch(apiUrl);
        if (!response.ok) throw new Error("Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn API");

        const data = await response.json();
        if (data.resultCount === 0) {
          resultDiv.innerHTML = "<p style='color:red;'>‚ùå Kh√¥ng t√¨m th·∫•y ·ª©ng d·ª•ng.</p>";
          return;
        }

        const app = data.results[0];
        const iconUrl = app.artworkUrl512;

        resultDiv.innerHTML = `
          <p><strong>${app.trackName}</strong></p>
          <img src="${iconUrl}" alt="App Icon">
          <br><a href="${iconUrl}" download>üì• T·∫£i icon</a>
        `;
      } catch (error) {
        console.error("L·ªói:", error);
        resultDiv.innerHTML = "<p style='color:red;'>‚ùå ƒê√£ x·∫£y ra l·ªói khi t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i sau.</p>";
      }
    }
  </script>
</body>
</html>
